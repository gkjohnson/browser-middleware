<!DOCTYPE html>
<html>
<head>
    <title></title>

    <script type="module">
        import './ZipServer.js'
        import './node_modules/jszip/dist/jszip.min.js'

        const zs = new ZipServer();
        zs
            .register()
            .then(() => {
                const zip = new JSZip();
                zip.file('test.py', 'hello!');
                zip.file('/folder/file.txt', 'im in a folder!');

                return zip.generateAsync({ type: 'arraybuffer' });
            })
            .then(b => {

                const id = zs.add(b).id;
                fetch('test.py').then(res => res.text()).then(o => console.log('do', o))
                requestAnimationFrame(() => zs.remove(id));

            });

    </script>
</head>
<body>

</body>
</html>
